---
title: "ARC02 C - コマンド入力"
description:
tags:
  - パターンに一致する文字列を数える
  - AtCoder
  - ARC
  - 文字列
  - Ruby
created_at: 2019-11-06
updated_at: 2019-11-06
draft: false
---

# 問題
[C - コマンド入力](https://atcoder.jp/contests/arc002/tasks/arc002_3)

Google検索しにくい問題名です。たどり着いたあなたはすごいです。

# 考察
制約を見るに、全ての2つのボタンの組み合わせに対して入力回数を求めることはできそうです。
\\(O(16 \times 16 \times 10^5 )\\)

ボタンの置き換えには注意が必要です。
例えば、`ABABBABA`の`AB`を`L`に、`BA`を`R`に置き換えることを考えてみます。

まず、`AB`を`L`にします。

`LLBLA`となります。`BA`を置換できなくなりました。

先に`BA`を`R`に置換してみます。

`ARBRR`となります。`AB`を置換できなくなりました。

置き換える時は、どちらかを先に行うのではなく、同時に行う必要があります。
つまり、前から順に見て、`AB`, `BA`のどちらかで置き換えられるなら置き換えてしまいます。

ところで、前から順に置き換えていくのは最適です。
例えば、`AB????`を`AB`, `BA`で置き換えることを考えます。

1, 2文字目が`AB`なので、置き換えます。置き換えると1文字減ります。

ここで、置き換えない選択肢をとると、3文字目が`A`だった時に2, 3文字目を置き換えて1文字減らせます。
しかし、1文字目の`A`は再利用できないまま残り続けます。さらに、2,3文字目を置き換えてしまったことにより、3,4文字目を置き換えるという選択肢はなくなります。

置き換えない選択肢を取ることによっていいことは起こりません。


実装する時は、文字列そのものを置き換えるのではなく置き換えた後の文字列の長さをカウントするようにしました。


```ruby
# l, r はAB, BAのようなコマンド
def cnt(s, l, r)
  res = 0
  i = 0
  while i < s.size
    res += 1
    if s[i, 2] == l || s[i, 2] == r
      i += 2
    else
      i += 1
    end
  end
  res
end
```

[submission](https://atcoder.jp/contests/arc002/submissions/8303412)



