---
title: ABC040 C - 柱柱柱柱柱 (100点)
description: 超典型的な動的計画法練習問題！
tags:
  - 競技プログラミング
  - AtCoder
  - Python3
  - DP
  - ABC-C
created_at: 2019-05-22
updated_at: 
draft: false
---

# 問題

[C - 柱柱柱柱柱](https://atcoder.jp/contests/abc040/tasks/abc040_c)

\\(N\\)本の柱が並んでいる。
\\(1\\)本目の柱からスタートし、右へ柱を渡っていき\\(N\\)本目の柱まで行きたい。
移動するときには、現在いる柱の高さと、移動後の柱の高さの差の絶対値ぶんのコストがかかる。
\\(N\\)本目の柱まで行く最小のコストを求める。

# 解法
DP（動的計画法）で解く。けんちょんさんのDP入門記事「[動的計画法超入門！ Educational DP Contest の A ～ E 問題の解説と類題集 - Qiita](https://qiita.com/drken/items/dc53c683d6de8aeacf5a#%E5%88%A5%E8%A7%A3-1-%E9%85%8D%E3%82%8B-dp)」によると、「貰うDP」、「配るDP」というのがある。この問題に当てはめると、それぞれ以下のことを意味する。

- 貰うDP：\\(i-2\\), \\(i-1\\)から\\(i\\)への遷移を考える
- 配るDP：\\(i\\)から\\(i+1\\), \\(i+2\\)の遷移を考える

この2つの方法で解いてみる。

## 解法1：貰うDP
要素を\\(INF\\)で初期化した\\(dp[]\\)を用意する。ただし、0-indexedとする。
これに伴い、問題では「\\(1\\)本目, \\(2\\)本目, ..., \\\(N\\)本目」と数えていた柱を、
「\\(0\\)本目, \\(1\\)本目, ..., \\\(N-1\\)本目」と数えることにする。
\\(dp[i]\\)は「\\(0\\)本目の柱から\\(i\\)本目の柱へ移動するまでの合計コストの最小値」となるようにする。
この\\(dp[i]\\)を求めていく。明らかに\\(dp[0]=0\\)である。\\(0\\)本目の柱から\\(0\\)本目の柱に移動するコストは\\(0\\)だからである。
また、柱\\(i\\)の高さを\\(a_i\\)とすると、\\(dp[1]=abs(a_0 - a_1)\\)である。

\\(i \geq 2\\)の場合を求めていく。
このDPにおける重要な考え方は「\\(i\\)本目の柱に到達した時点で\\(i-2\\), \\(i-1\\)本目までの合計最小コストはわかっている」というもの。
つまり、\\(i-2\\)本目までの合計最小コストは\\(dp[i-2]\\)に、
\\(i-1\\)本目までの合計最小コストは\\(dp[i-1]\\)に入っているんだという意識が大事。
これを踏まえて
- \\(i-1\\)から\\(i\\)に移動するとき、合計最小コスト\\(cost1 = dp[i-1]+|a_i - a_{i-1}|\\)
- \\(i-2\\)から\\(i\\)に移動するとき、合計最小コスト\\(cost2 = dp[i-2]+|a_i - a_{i-2}|\\)

\\(dp[i]\\)は上記のうち小さいほうを採用すればよく、\\(dp[i]=min(cost1, cost2)\\)となる。
このようにして各柱についてのコストが求まり、\\(dp[N-1]\\)が答えとなる。

[submission](https://atcoder.jp/contests/abc040/submissions/5101300)

## 解法2：配るDP

```python
INF = 1<<60
n=int(input())
h=list(map(int, input().split()))+[INF]*2 # 範囲外にアクセスしないように2個足してる
dp=[INF]*(n+2) # 範囲外にアクセスしないように2個足してる
dp[0]=0
dp[1]=abs(h[0]-h[1])
for i in range(0, n):
    dp[i+1] = min(dp[i+1], dp[i]+abs(h[i]-h[i+1]))
    dp[i+2] = min(dp[i+2], dp[i]+abs(h[i]-h[i+2]))
print(dp[n-1])
```

[submission](https://atcoder.jp/contests/abc040/submissions/5186185)

# 学び
基本的なDPなので押さえておきたい。また、最小化問題なので\\(INF\\)で初期化することに注意。