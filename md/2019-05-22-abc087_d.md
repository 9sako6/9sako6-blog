---
title: ABC087 D - People on a Line (400点)
description: "与えられる情報が成り立ってるのかを調べていく。条件が成立しているかどうかは重み付きUnion-Find木を使えば簡単に調べられる..."
tags:
  - 競技プログラミング
  - AtCoder
  - Union-Find木
  - 重み付きUnion-Find木
  - Ruby
created_at: 2019-05-22
updated_at: 2019-11-09
draft: false
---

# 問題
[D - People on a Line](https://atcoder.jp/contests/abc087/tasks/arc090_b)

# 解法

与えられるそれぞれの情報について、本当に \\( x_{R_i} - x_{L_i} = D_i \\) が成り立ってるのかを調べていく。
で、この条件が成立しているかどうかは重み付きUnion-Find木を使えば簡単に調べられる。
次のような処理を繰り返して条件を調べていく。

まず、与えられた2点がすでに連結されているかどうかをみる。
連結されていなかった場合は連結して次の処理に飛ぶ。
連結されていた場合は、重み付きUnion-Find木からわかる2点の距離と与えられた距離\\(D_i\\)が等しいかどうか調べる。
等しければ何もしないが、等しくなかった場合は矛盾する情報が与えられたということなので、Noを出力して終了する。

矛盾なく最後の2点まで調べ終えたら、Yesを出力して終了する。

これで正解だが、ちょっと引っかかる点があった。
例えば、与えられる点が
```txt
1 2
2 3
3 4
5 6
```
みたいな場合。つまり、木が一直線に(①-②-③-...-⑥といった具合に）伸びていくような場合。
連結を調べる段階ではどれも繋がってないから、距離の判定をすり抜けて最後までいってYesになっちゃうじゃん、と思った。
でも、よく考えたらこれはYesでいい。なぜなら、点は一直線に繋がっていくだけだから、\\(D_i\\)がいくつであろうが関係なく、その\\(D_i\\)ずつ点の間の距離をとって繋げていくことができる。

[submission](https://atcoder.jp/contests/abc087/submissions/5495602)
